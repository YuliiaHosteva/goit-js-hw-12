{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst fetchUsersBtn = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst textInput = document.querySelector('.text-input');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nconst API_KEY = '41611095-6f6895f75fda0efc7328923df';\nlet currentPage = 1;\nconst perPage = 40;\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nasync function searchImages(query, currentPage) {\n  const requestParams = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  };\n\n  const searchParams = new URLSearchParams(requestParams);\n\n  showLoader();\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    hideLoader();\n\n    const { hits, totalHits } = response.data;\n    if (hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#FAFAFB',\n        backgroundColor: '#4285F4',\n        position: 'topRight'\n      });\n      return;\n    }\n\n    if (currentPage === 1) {\n      gallery.innerHTML = '';\n    }\n\n    const imagesHTML = hits.reduce((html, image) => {\n      return html + imageCard(image);\n    }, '');\n\n    gallery.insertAdjacentHTML('beforeend', imagesHTML);\n    modal.refresh();\n\n    if (currentPage * perPage >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n      const scrollImages = document\n        .querySelector('.gallery img')\n        .getBoundingClientRect().height;\n      window.scrollBy({\n        top: scrollImages * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nfetchUsersBtn.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchQuery = textInput.value.trim();\n  currentPage = 1;\n  searchImages(searchQuery, currentPage);\n  fetchUsersBtn.reset();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  const searchQuery = textInput.value.trim();\n  searchImages(searchQuery, currentPage);\n});\n\nfunction imageCard(images) {\n  return `<li>\n      <a href=\"${images.largeImageURL}\">\n        <img src=\"${images.webformatURL}\" alt=\"${images.tags}\">\n      </a>\n      <div class=\"info\">\n        <div class=\"image-info\">\n          <span>Likes</span>\n          <span class=\"image-value\">${images.likes}</span>\n        </div>\n        <div class=\"image-info\">\n          <span>Views</span>\n          <span class=\"image-value\">${images.views}</span>\n        </div>\n        <div class=\"image-info\">\n          <span>Comments</span>\n          <span class=\"image-value\">${images.comments}</span>\n        </div>\n        <div class=\"image-info\">\n          <span>Downloads</span>\n          <span class=\"image-value\">${images.downloads}</span>\n        </div>\n      </div>\n    </li>`\n\n}\n"],"names":["fetchUsersBtn","gallery","textInput","loadMoreBtn","modal","SimpleLightbox","loader","API_KEY","currentPage","perPage","showLoader","hideLoader","searchImages","query","requestParams","searchParams","response","axios","hits","totalHits","iziToast","imagesHTML","html","image","imageCard","scrollImages","error","event","searchQuery","images"],"mappings":"owBAMA,MAAMA,EAAgB,SAAS,cAAc,OAAO,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAQ,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAEvB,MAAMC,EAAU,qCAChB,IAAIC,EAAc,EAClB,MAAMC,EAAU,GAEhB,SAASC,GAAa,CACpBJ,EAAO,MAAM,QAAU,OACzB,CAEA,SAASK,GAAa,CACpBL,EAAO,MAAM,QAAU,MACzB,CAEA,eAAeM,EAAaC,EAAOL,EAAa,CAC9C,MAAMM,EAAgB,CACpB,IAAKP,EACL,EAAGM,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAML,EACN,SAAUC,CACd,EAEQM,EAAe,IAAI,gBAAgBD,CAAa,EAEtDJ,IAEA,GAAI,CACF,MAAMM,EAAW,MAAMC,EAAM,IAAI,4BAA4BF,GAAc,EAC3EJ,IAEA,KAAM,CAAE,KAAAO,EAAM,UAAAC,GAAcH,EAAS,KACrC,GAAIE,EAAK,SAAW,EAAG,CACrBE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UAClB,CAAO,EACD,MACD,CAEGZ,IAAgB,IAClBP,EAAQ,UAAY,IAGtB,MAAMoB,EAAaH,EAAK,OAAO,CAACI,EAAMC,IAC7BD,EAAOE,EAAUD,CAAK,EAC5B,EAAE,EAKL,GAHAtB,EAAQ,mBAAmB,YAAaoB,CAAU,EAClDjB,EAAM,QAAO,EAETI,EAAcC,GAAWU,EAC3BhB,EAAY,MAAM,QAAU,OAC5BiB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,SAAU,UAClB,CAAO,MACI,CACLjB,EAAY,MAAM,QAAU,QAC5B,MAAMsB,EAAe,SAClB,cAAc,cAAc,EAC5B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAe,EACpB,SAAU,QAClB,CAAO,CACF,CACF,OAAQC,EAAP,CACAf,IACAS,EAAS,MAAM,CACb,MAAO,QACP,QAASM,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,CAEA1B,EAAc,iBAAiB,SAAU2B,GAAS,CAChDA,EAAM,eAAc,EAEpB,MAAMC,EAAc1B,EAAU,MAAM,KAAI,EACxCM,EAAc,EACdI,EAAagB,EAAapB,CAAW,EACrCR,EAAc,MAAK,CACrB,CAAC,EAEDG,EAAY,iBAAiB,QAAS,IAAM,CAC1CK,GAAe,EACf,MAAMoB,EAAc1B,EAAU,MAAM,KAAI,EACxCU,EAAagB,EAAapB,CAAW,CACvC,CAAC,EAED,SAASgB,EAAUK,EAAQ,CACzB,MAAO;AAAA,iBACQA,EAAO;AAAA,oBACJA,EAAO,sBAAsBA,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA,sCAKlBA,EAAO;AAAA;AAAA;AAAA;AAAA,sCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,sCAIPA,EAAO;AAAA;AAAA;AAAA;AAAA,sCAIPA,EAAO;AAAA;AAAA;AAAA,UAK7C"}